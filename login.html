<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - TecWorld</title>
    <style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
        body, html { height: 100%; font-family: Arial, sans-serif; }
   body {
    display: flex;  
    flex-direction: column;
    justify-content: center;
    align-items: center; 
    background-color: #0d0f12; 
    overflow: hidden; 
    text-align: center;
    margin: 0;
    background-image: url('./mundotec.webp');
}
    body::after {
    content: ''; 
    position: fixed; /* Deixa o overlay fixo */
    width: 100vw; /* Largura total da tela */
    height: 100vh; /* Altura total da tela */
    background: rgba(0, 0, 0, 0.5); /* Cor preta com 50% de opacidade para escurecer */
    z-index: -1; /* Fica atr√°s do conte√∫do */
}

    .language-buttons {
    position: absolute;
    top: 10px;
    right: 10px;
    z-index: 2;
}

.language-buttons select {
    padding: 8px 12px;
    cursor: pointer;
    background-color: #444;
    color: #fff;
    border-radius: 5px;
    border: 1px solid #ccc;
    font-size: 12px;
    transition: background-color 0.3s, transform 0.3s;
}

.language-buttons select:hover {
    background-color: #555;
    transform: scale(1.05);
}

.language-buttons option {
    background-color: #333;
    color: white;
}

    .login-container { display: flex; justify-content: center; align-items: center; height: 100%; z-index: 2; }
    form.invisible { background-color: transparent; padding: 30px; box-shadow: none; border-radius: 0; width: 350px; text-align: center; }
    h1 { font-size: 32px; margin-bottom: 25px; color: #E0FFFF; }
    input[type="text"], input[type="password"] { width: 100%; padding: 14px; margin: 10px 0; border: 1px solid #b3dae4; border-radius: 8px; background-color: #8ed2e4; color: #ffffff; font-size: 18px; }
    input[type="text"]::placeholder, input[type="password"]::placeholder { color: #000; }
    .login-btn { width: 100%; padding: 14px; background: linear-gradient(90deg, #a6e9df 0%, #00aaff 100%); border: none; border-radius: 8px; color: #000; font-size: 18px; cursor: pointer; margin-top: 20px; transition: 0.3s; }
    .login-btn:hover { background: linear-gradient(90deg, #ffffff 0%, #f3f3f3 100%); transform: scale(1.05); }
    .forgot-password, .create-account, .back-to-login { display: block; margin-top: 20px; font-size: 14px; color: #00ffd9; text-decoration: none; }
    .forgot-password:hover, .create-account:hover, .back-to-login:hover { text-decoration: underline; color: #00aaff; }
    .error-message {
        color: #ff6347; /* Cor vermelha para erros */
        font-size: 16px; /* Ajuste o tamanho da fonte, se necess√°rio */
        margin-bottom: 10px;
        text-align: left;
        font-family: Verdana, sans-serif;
        display: block; /* Garante que o erro ser√° exibido como um bloco */
    }
    .error-input { border: 1px solid #ff6347; }
    .checkbox-container { display: flex; flex-direction: row; align-items: center; font-size: 14px; color: #E0FFFF; margin-top: 10px; }
    .checkbox-container label { margin-right: 10px; }
    .checkbox-container input { margin-right: 5px; }
    input[type="text"], input[type="password"], input[type="email"] {
        width: 100%; 
        padding: 14px; 
        margin: 10px 0; 
        border: 1px solid #b3dae4; 
        border-radius: 8px; 
        background-color: #8ed2e4; 
        color: #ffffff; 
        font-size: 18px; 
    }

    input[type="text"]::placeholder, input[type="password"]::placeholder, input[type="email"]::placeholder {
        color: #000;
    }


    </style>
</head>
<body>

    <div class="language-buttons">
        <selectonchange="changeLanguage(this.value)">
            <option value="pt">üáßüá∑ Portugu√™s</option>
            <option value="en">üá∫üá∏ English</option>
            <option value="es">üá™üá∏ Espa√±ol</option>
        </select>
    </div>
    <div class="login-container">
        <form id="login-form" class="invisible" onsubmit="return validateForm(event)">
            <!-- Conte√∫do ser√° gerado dinamicamente pelo JavaScript -->
        </form>
    </div>
  <script>
      let currentLanguage = 'pt'; // Idioma padr√£o

        // Fun√ß√£o para alterar o idioma
        function changeLanguage(lang) {
            localStorage.setItem('selectedLanguage', lang); // Salva o idioma
            currentLanguage = lang;
            showLogin(); // Atualiza os textos na p√°gina de login
        }

        // Evento DOMContentLoaded para carregar o idioma salvo e exibir a p√°gina de login
        document.addEventListener('DOMContentLoaded', () => {
            const savedLanguage = localStorage.getItem('selectedLanguage') || 'pt'; // Recupera ou usa o idioma padr√£o
            currentLanguage = savedLanguage;
            // Cria e adiciona o seletor de idioma dinamicamente
            const select = document.createElement('select');
            select.addEventListener('change', (event) => {
                changeLanguage(event.target.value);
            });
            const languages = { pt: 'Portugu√™s', en: 'English', es: 'Espa√±ol' };
            for (const lang in languages) {
                const option = document.createElement('option');
                option.value = lang;
                option.textContent = languages[lang];
                option.selected = lang === savedLanguage;
                select.appendChild(option);
            }
            const loginForm = document.getElementById('login-form');
            if (loginForm) {
                loginForm.insertBefore(select, loginForm.firstChild);
            } else {
                const container = document.createElement('div');
                container.id = 'login-form';
                container.appendChild(select);
                document.body.appendChild(container);
            }
            showLogin(); // Exibe o conte√∫do de login imediatamente
        });

        // Fun√ß√£o para exibir e traduzir a p√°gina de login
        function showLogin() {
            const t = translations[currentLanguage]; // Obt√©m as tradu√ß√µes para o idioma selecionado
            const loginForm = document.getElementById('login-form');
            if (loginForm) {
                loginForm.innerHTML = `
                    <h1>${t.heading}</h1>
                    <input type="text" id="email" placeholder="${t.emailPlaceholder}">
                    <input type="password" id="password" placeholder="${t.passwordPlaceholder}">
                    <div id="general-error" class="error-message"></div>
                    <button type="button" class="login-btn" onclick="login()">${t.loginButton}</button>
                    <a href="#" class="forgot-password" onclick="showForgotPassword()">${t.forgotPassword}</a>
                    <a href="#" class="create-account" onclick="showCreateAccount()">${t.createAccount}</a>
                `;
                // Garante que o seletor de idioma permane√ßa
                const select = document.querySelector('select');
                if (select) {
                    select.value = currentLanguage;
                    loginForm.insertBefore(select, loginForm.firstChild);
                }
            }
        }

        const translations = {
            pt: {
                heading: "TecWorld - <br>Conectando o Mundo",
                emailPlaceholder: "Email ou nome de usuario",
                passwordPlaceholder: "Senha",
                loginButton: "Entrar",
                forgotPassword: "Esqueceu a senha?",
                createAccount: "Criar Conta",
                recoverHeading: "Recuperar Senha",
                recoverButton: "Recuperar",
                createHeading: "Criar Conta - TecWorld",
                createUsernamePlaceholder: "Nome de usu√°rio",
                createEmailPlaceholder: "Email",
                createPasswordPlaceholder: "Senha",
                createTerms: "Aceito os <a href='termos.html' target='_blank'>Termos de Uso</a>",
                createPrivacy: "Aceito a <a href='privacidade.html' target='_blank'>Pol√≠tica de Privacidade</a>",
                createRegister: "Cadastrar",
                backToLogin: "J√° tem conta? Entrar",
                generalError: "Por favor, preencha todos os campos solicitados.",
                invalidEmail: "Por favor, insira um email v√°lido (Gmail, Outlook, Yahoo Mail, Apple Mail, ProtonMail, Zoho Mail).",
                invalidPassword: "A senha deve ter mais de 5 caracteres.",
                termsError: "Voc√™ precisa aceitar os Termos de Uso e a Pol√≠tica de Privacidade."
            },
            en: {
                heading: "TecWorld - <br>Connecting the World",
                emailPlaceholder: "Email or username",
                passwordPlaceholder: "Password",
                loginButton: "Login",
                forgotPassword: "Forgot password?",
                createAccount: "Create Account",
                recoverHeading: "Recover Password",
                recoverButton: "Recover",
                createHeading: "Create Account - TecWorld",
                createUsernamePlaceholder: "Username",
                createEmailPlaceholder: "Email",
                createPasswordPlaceholder: "Password",
                createTerms: "I accept the <a href='terms.html' target='_blank'>Terms of Use</a>",
                createPrivacy: "I accept the <a href='privacy.html' target='_blank'>Privacy Policy</a>",
                createRegister: "Register",
                backToLogin: "Already have an account? Login",
                generalError: "Please fill in all required fields.",
                invalidEmail: "Please enter a valid email (Gmail, Outlook, Yahoo Mail, Apple Mail, ProtonMail, Zoho Mail).",
                invalidPassword: "Password must be more than 5 characters.",
                termsError: "You must accept the Terms of Use and Privacy Policy."
            },
            es: {
                heading: "TecWorld - <br>Conectando el Mundo",
                emailPlaceholder: "Correo electr√≥nico o nombre de usuario",
                passwordPlaceholder: "Contrase√±a",
                loginButton: "Iniciar sesi√≥n",
                forgotPassword: "¬øOlvidaste tu contrase√±a?",
                createAccount: "Crear Cuenta",
                recoverHeading: "Recuperar Contrase√±a",
                recoverButton: "Recuperar",
                createHeading: "Crear Cuenta - TecWorld",
                createUsernamePlaceholder: "Nombre de usuario",
                createEmailPlaceholder: "Correo electr√≥nico",
                createPasswordPlaceholder: "Contrase√±a",
                createTerms: "Acepto los <a href='terminos.html' target='_blank'>T√©rminos de Uso</a>",
                createPrivacy: "Acepto la <a href='privacidad.html' target='_blank'>Pol√≠tica de Privacidad</a>",
                createRegister: "Registrar",
                backToLogin: "¬øYa tienes cuenta? Iniciar sesi√≥n",
                generalError: "Por favor, complete todos los campos requeridos.",
                invalidEmail: "Por favor, ingresa un correo electr√≥nico v√°lido (Gmail, Outlook, Yahoo Mail, Apple Mail, ProtonMail, Zoho Mail).",
                invalidPassword: "La contrase√±a debe tener m√°s de 5 caracteres.",
                termsError: "Debes aceptar los T√©rminos de Uso y la Pol√≠tica de Privacidad."
            }
        };
        
      // Fun√ß√£o de login
function login() {
    const email = document.getElementById('email').value.trim();
    const password = document.getElementById('password').value.trim();
    const errorMessage = document.getElementById('general-error');
    const t = translations[currentLanguage];

    if (!email || !password) {
        errorMessage.innerHTML = t.generalError || 'Preencha todos os campos antes de continuar.';
        errorMessage.style.display = 'block';
        return;
    }

    const userData = localStorage.getItem("user_" + email);

    if (userData) {
        const parsedData = JSON.parse(userData);

        if (parsedData.password === password) {
            // Salva o ID e o e-mail do usu√°rio logado
            localStorage.setItem("email", email);
            localStorage.setItem("userId", parsedData.id);  // Armazenando o ID do usu√°rio

            console.log("Usu√°rio logado com sucesso:", email);
            window.location.href = "inicial.html";
        } else {
            errorMessage.innerHTML = t.invalidEmailOrPassword || 'E-mail ou senha inv√°lidos.';
            errorMessage.style.display = 'block';
        }
    } else {
        errorMessage.innerHTML = t.emailNotRegistered || 'E-mail n√£o registrado.';
        errorMessage.style.display = 'block';
    }
}

// Fun√ß√£o para salvar a conta e atribuir um ID √∫nico num√©rico sequencial
function saveAccount() {
    const username = document.getElementById('username').value.trim();
    const email = document.getElementById('email').value.trim();
    const password = document.getElementById('password').value.trim();
    const terms = document.getElementById('terms').checked;
    const privacy = document.getElementById('privacy').checked;
    const errorMessage = document.getElementById('general-error');
    const t = translations[currentLanguage];

    if (!username || !email || !password || !terms || !privacy) {
        errorMessage.innerHTML = t.generalError || 'Preencha todos os campos e aceite os termos.';
        errorMessage.style.display = 'block';
        return;
    }

    const validDomains = /@(gmail\.com|outlook\.com|yahoo\.com|aol\.com|icloud\.com|protonmail\.com|zoho\.com)$/i;
    if (!validDomains.test(email)) {
        errorMessage.innerHTML = t.invalidEmail || 'Por favor, insira um email v√°lido (Gmail, Outlook, Yahoo Mail, Apple Mail, ProtonMail, Zoho Mail).';
        errorMessage.style.display = 'block';
        return;
    }

    if (password.length <= 5) {
        errorMessage.innerHTML = t.invalidPassword || 'A senha deve ter mais de 5 caracteres.';
        errorMessage.style.display = 'block';
        return;
    }

    if (!terms || !privacy) {
        errorMessage.innerHTML = t.termsError || 'Voc√™ precisa aceitar os Termos de Uso e a Pol√≠tica de Privacidade.';
        errorMessage.style.display = 'block';
        return;
    }

    const existingUser = localStorage.getItem("user_" + email);
    if (existingUser) {
        errorMessage.innerHTML = t.emailAlreadyRegistered || 'Este e-mail j√° est√° cadastrado.';
        errorMessage.style.display = 'block';
        return;
    }

    // Gerador de ID num√©rico com 7 d√≠gitos (de 0000001 at√© 9999999)
    const id = generateUniqueId(); 

    const userData = {
        id: id,
        username: username,
        password: password
    };

    localStorage.setItem("user_" + email, JSON.stringify(userData));
    localStorage.setItem("email", email);

    console.log("Conta criada para:", email, "com ID:", id);
    window.location.href = "inicial.html";
}

// Fun√ß√£o para gerar o ID num√©rico de 0000001 at√© 9999999
function generateUniqueId() {
    // Obt√©m o √∫ltimo ID armazenado no localStorage, ou 0 se n√£o existir
    let lastId = parseInt(localStorage.getItem("lastId")) || 0;

    // Verifica se o ID excedeu o limite de 9999999
    if (lastId >= 9999999) {
        lastId = 0;  // Reseta para 0 quando atingir o limite
    }

    // Incrementa o √∫ltimo ID
    lastId++;

    // Formata o ID com 7 d√≠gitos, preenchendo com zeros √† esquerda
    const formattedId = String(lastId).padStart(7, '0');

    // Armazena o novo ID no localStorage
    localStorage.setItem("lastId", lastId);

    return formattedId;
}

// Fun√ß√£o para exibir o formul√°rio de recupera√ß√£o de senha
function showForgotPassword() {
    const t = translations[currentLanguage];
    const loginForm = document.getElementById('login-form');
    if (loginForm) {
        loginForm.innerHTML = ` 
            <h1>${t.recoverHeading}</h1>
            <input type="email" placeholder="${t.emailPlaceholder}" id="email">
            <button type="button" class="login-btn" onclick="recoverPassword()">${t.recoverButton}</button>
            <a href="#" class="back-to-login" onclick="showLogin()">${t.backToLogin}</a>
        `;
        const select = document.querySelector('select');
        if (select) {
            loginForm.insertBefore(select, loginForm.firstChild);
        }
    }
}

// Fun√ß√£o para exibir o formul√°rio de cria√ß√£o de conta
function showCreateAccount() {
    const t = translations[currentLanguage];
    const loginForm = document.getElementById('login-form');
    if (loginForm) {
        loginForm.innerHTML = `
            <h1>${t.createHeading}</h1>
            <input type="text" placeholder="${t.createUsernamePlaceholder}" id="username">
            <input type="text" placeholder="${t.createEmailPlaceholder}" id="email">
            <input type="password" placeholder="${t.createPasswordPlaceholder}" id="password">
            <div class="checkbox-container">
                <input type="checkbox" id="terms">
                <label for="terms">${t.createTerms}</label>
            </div>
            <div class="checkbox-container">
                <input type="checkbox" id="privacy">
                <label for="privacy">${t.createPrivacy}</label>
            </div>
            <div id="general-error" class="error-message"></div>
            <button type="button" class="login-btn" onclick="saveAccount()">${t.createRegister}</button>
            <a href="#" class="back-to-login" onclick="showLogin()">${t.backToLogin}</a>
        `;
        const select = document.querySelector('select');
        if (select) {
            loginForm.insertBefore(select, loginForm.firstChild);
        }
    }
}

// Fun√ß√£o de recupera√ß√£o de senha (simulada)
function recoverPassword() {
    const email = document.getElementById('email').value.trim();
    const t = translations[currentLanguage];
    if (!email) {
        alert(t.invalidEmail || 'Por favor, insira um e-mail v√°lido.');
        return;
    }
    alert(t.recoverPasswordSoon || 'Recupera√ß√£o de senha em breve!');
}

// Inicializa a tela de login
showLogin();
 </script>
 </body>
</html>
