<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat de Texto - TecEvolution</title>
    <style>
  body, html {
    height: 100%;
  margin: 0;
  font-family: Arial, sans-serif;
  display: flex;
  flex-direction: column;
  
  /* Fundo com imagem + gradiente */
  background-image: 
    linear-gradient(to top, rgba(26, 47, 72, 0.8) 0%, rgba(45, 86, 133, 0.8) 50%, rgba(74, 127, 194, 0.8) 100%),
    url('pexels-sliceisop-2873671.jpg');
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  background-attachment: fixed;

  color: #e0e0e0;
  position: relative;
  z-index: 0;
}


body::after {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background: rgba(0, 0, 0, 0.4); /* Escurecimento com opacidade */
    z-index: -1; /* Garante que fique atr√°s do conte√∫do, mas acima do background */
}

  /* Estilo da √°rea de chat */
        .chat-area {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: 20px;
            padding-top: 60px; /* Espa√ßo extra para o bot√£o Denunciar */
            overflow-y: auto;
            margin: 0;
            border: none;
            border-radius: 0;
        }

        /* Estilo das mensagens */
        .message {
            margin-bottom: 15px;
            padding: 10px;
            border-radius: 5px;
            max-width: 70%;
        }

        .message.user {
            background-color: #00aaff; /* Cor das mensagens do usu√°rio */
            align-self: flex-end;
        }

        .message.partner {
            background-color: #28a745; /* Cor das mensagens do parceiro */
            align-self: flex-start;
        }

        /* Estilo da √°rea de entrada */
        .input-area {
            display: flex;
            padding: 10px;
            border-top: 1px solid #444;
        }

        .input-area input {
            flex: 1;
            padding: 10px;
            border: 1px solid #444;
            border-radius: 5px;
            margin: 0;
        }

        .input-area button {
            padding: 10px;
            border: none;
            border-radius: 5px;
            color: white;
            cursor: pointer;
            margin-left: 10px;
        }

        .input-area .send-button {
            background-color: #00aaff;
        }

        .input-area .send-button:hover {
            background-color: #007acc;
        }

        

     .flag-icon {
  position: absolute;
  top: 57px; /* antes era -1px */
  right: 3px; /* antes era -10px */
  width: 68px;
  height: 68px;
  cursor: pointer;
  filter: invert(23%) sepia(95%) saturate(7411%) hue-rotate(358deg) brightness(95%) contrast(115%);
  
}

        /* Estilos para a janela de den√∫ncia */
        .report-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;
        }

        .report-content {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            width: 400px;
            max-width: 80%;
            position: relative;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            overflow: hidden;
        }

        .report-content h2 {
            margin-top: 0;
            padding-top: 10px;
            color: #333;
        }

        .report-options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }

        .report-options label {
            padding: 5px;
            background-color: transparent;
            cursor: pointer;
            transition: background-color 0.3s;
            color: #333;
            font-weight: bold;
        }

        .report-options label:hover {
            background-color: #ddd;
        }

        .report-content button {
            padding: 10px;
            background-color: #007acc;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            width: 100%;
        }

        .report-content button:hover {
            background-color: #005f8b;
        }

        .report-close-letter {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 24px;
            font-weight: bold;
            color: #333;
            cursor: pointer;
            transition: color 0.3s;
        }

        .report-close-letter:hover {
            color: #ff0000;
        }
        

        .report-description {
            width: 100%;
            height: 100px;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            margin-bottom: 20px;
            resize: vertical;
        }

        .error-message {
            color: red;
            margin-top: 10px;
            font-size: 14px;
            text-align: center;
        }

        .thank-you-message {
            display: none;
            padding: 10px;
            background-color: #000000bd;
            color: white;
            text-align: center;
            font-size: 14px;
            border-radius: 5px;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100%;
            max-width: 400px;
            white-space: nowrap;
        }
        .chat-container {
    display: flex;
    justify-content: space-between; /* Distribui as imagens nos cantos */
    align-items: center;
    padding: 10px;
}

.user {
  display: flex;
  align-items: center;
  gap: 10px;
}

.profile-image {
  width: 50px;
  height: 50px;
  border-radius: 50%;
  object-fit: cover;
  background-color: #2a2a2a;
  border: 2px solid #00bfff;
  transition: transform 0.25s ease, border-color 0.25s ease;
}

.profile-image:hover {
  transform: scale(1.1);
  border-color: #33ccff;
}

.username {
  font-size: 16px;
  font-weight: bold;
  color: #fff;
  display: flex;
  align-items: center;
  gap: 5px;
}
@media (max-width: 600px) {
  .chat-area {
    padding: 10px;
    padding-top: 50px;
  }

  .message {
    max-width: 85%;
    font-size: 14px;
  }

  .profile-image {
    width: 42px;
    height: 42px;
  }

  .username {
    font-size: 14px;
  }

  .flag-icon {
    width: 48px;
    height: 48px;
  }

  .report-content {
    padding: 20px;
  }
}
.report-submit-container {
  display: flex;
  justify-content: center;
  align-items: center;
  margin-top: 15px;
}

.report-submit-btn {
  display: inline-block;
  padding: 8px 18px;
  background: linear-gradient(90deg, #0078ff, #00bfff);
  color: #cccccc;
  border: none;
  border-radius: 8px;
  font-size: 15px;
  font-weight: bold;
  letter-spacing: 0.5px;
  cursor: pointer;
  transition: all 0.25s ease;
  box-shadow: 0 0 10px rgba(0, 191, 255, 0.3);
}

.report-submit-btn:hover {
  background: linear-gradient(90deg, #00bfff, #008cd1);
  transform: translateY(-2px);
  box-shadow: 0 0 15px rgba(0, 191, 255, 0.6);
}

.report-submit-btn:active {
  transform: scale(0.96);
  box-shadow: 0 0 8px rgba(0, 191, 255, 0.4);
}
/* === Fundo escurecido === */
.profile1 {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: none;
  justify-content: center;
  align-items: center;
  backdrop-filter: blur(5px);
  z-index: 1000;
}

.profile1.hidden {
  display: none;
}

.profile1 .overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(10, 10, 10, 0.6);
}

/* === Caixa do perfil === */
.profile1 .profile-box {
  position: relative;
  z-index: 2;
  display: flex;
  flex-direction: column;
  align-items: center;
  background-color: #1b1b1b;
  border-radius: 18px;
  padding: 10px 5px; /* espa√ßo interno equilibrado */
  width: 85%;
  max-width: 340px;
  min-height: 340px; /* altura ajustada para n√£o parecer exagerada */
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.7);
  text-align: center;
}

/* === Bot√£o de fechar === */
.profile1 .close-btn {
  position: absolute;
  top: 12px;
  right: 14px;
  color: #ccc;
  font-size: 22px;
  cursor: pointer;
  transition: color 0.2s ease;
}

.profile1 .close-btn:hover {
  color: #fff;
}

/* === Imagem === */
.profile1 .profile-image-containe {
  width: 110px;
  height: 110px;
  border-radius: 50%;
  overflow: hidden;
  border: 2px solid #00bfff;
  margin-bottom: 15px;
}

.profile1 .profile-image-containe img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

/* === Nome e ID === */
.profile1 .username1 {
  font-size: 1.3rem;
  font-weight: 700;
  margin-bottom: 6px;
  color: #fff;
}

.profile1 #user-id {
  font-size: 0.9rem;
  color: #aaa;
  margin-bottom: 14px;
}

/* === Biografia === */
.profile1 .bio {
  font-size: 1rem;
  color: #ddd;
  line-height: 1.8;
  margin: 0;
  padding: 0 10px;
}



    </style>
</head>
<body>
    <div class="chat-container">
        <!-- Usu√°rio 1 √† esquerda -->
        <div class="user">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSPlwkUTsaWA_zSj0oFI7sbKYXqs-ih3b0_Bg&s" alt="Usu√°rio 1" class="profile-image" onclick="openperfil">
            <span class="username">
                Usu√°rio 1

            </span>
        </div>
    
        <!-- Usu√°rio 2 √† direita -->
        <div class="user">
            <span class="username">
                Usu√°rio 2
            </span>
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSPlwkUTsaWA_zSj0oFI7sbKYXqs-ih3b0_Bg&s" alt="Usu√°rio 2" class="profile-image">
        </div>
    </div>    
   <!-- Bot√£o Denunciar -->
<img src="bandeira.svg" alt="Denunciar" class="flag-icon" id="flagIcon" />

<!-- Perfil Pop-up -->
<div class="profile1 hidden" id="popupPerfil">
  <div class="overlay" onclick="closePerfil()"></div>

  <div class="profile-box">
    <div class="close-btn" onclick="closePerfil()">‚úï</div>

    <div class="profile-image-containe">
      <img
        src="https://cdn-icons-png.flaticon.com/512/149/149071.png"
        alt="Foto de perfil"
      />
    </div>

    <h3 class="username1">Usu√°rio An√¥nimo</h3>
    <span id="user-id">#1234567</span>
    <p class="bio">
      Ol√°! Esta √© a biografia do usu√°rio. Aqui ele pode escrever algo breve
      sobre si mesmo.
    </p>
    </div>
 </div>

    <!-- √Årea de chat -->
    <div class="chat-area" id="chatArea"></div>

    <!-- √Årea de entrada -->
    <div class="input-area">
        <input type="text" id="messageInput" placeholder="Digite sua mensagem...">
        <button class="send-button" onclick="sendMessage()">Enviar</button>

    </div>

    <!-- Janela Modal de Den√∫ncia -->
    <div class="report-modal" id="reportModal">
        <div class="report-content">
            <div class="report-close-letter" onclick="closeReportModal()">X</div>
            <h2>Denunciar Chat</h2>
            <div class="report-options">
                <label><input type="radio" name="reportReason" value="Ofensa"> Ofensa</label>
                <label><input type="radio" name="reportReason" value="Discurso de √≥dio"> Discurso de √≥dio</label>
                <label><input type="radio" name="reportReason" value="Abuso sexual"> Abuso sexual</label>
                <label><input type="radio" name="reportReason" value="Comportamento inadequado"> Comportamento inadequado</label>
                <label><input type="radio" name="reportReason" value="Ass√©dio"> Ass√©dio</label>
                <label><input type="radio" name="reportReason" value="Conte√∫do impr√≥prio"> Conte√∫do impr√≥prio</label>
                <label><input type="radio" name="reportReason" value="Amea√ßas"> Amea√ßas</label>
                <label><input type="radio" name="reportReason" value="Spam"> Spam</label>
                <label><input type="radio" name="reportReason" value="Outro"> Outro</label>
            </div>

            <textarea class="report-description" id="reportDescription" placeholder="Descreva a den√∫ncia (opcional)"></textarea>

            <div id="errorMessage" class="error-message" style="display: none;">Voc√™ deve marcar uma das op√ß√µes antes de enviar.</div>

         <div class="report-submit-container">
             <button class="report-submit-btn" onclick="submitReport()">Enviar Den√∫ncia</button>
          </div>

        </div>
    </div>

    <div id="thankYouMessage" class="thank-you-message">
        Obrigado por nos ajudar a manter a comunidade segura!
    </div>
    

    <script>
        document.getElementById('messageInput').addEventListener('keydown', function(event) {
            if (event.key === 'Enter') {
                event.preventDefault();
                sendMessage();
            }
        });

        function sendMessage() {
            const input = document.getElementById('messageInput');
            const message = document.createElement('div');
            message.classList.add('message', 'user');
            message.textContent = input.value.trim();
            const chatArea = document.getElementById('chatArea');
            chatArea.appendChild(message);

            input.value = '';
            chatArea.scrollTop = chatArea.scrollHeight;
        }

      let touchStartX = 0;
let touchEndX = 0;

document.addEventListener('touchstart', (e) => {
  touchStartX = e.changedTouches[0].screenX;
});

document.addEventListener('touchend', (e) => {
  touchEndX = e.changedTouches[0].screenX;
  handleSwipe();
});

function handleSwipe() {
  const swipeDistance = touchStartX - touchEndX;

  if (Math.abs(swipeDistance) < 50) return; // ignora toques curtos

  if (swipeDistance > 0) {
    // üëâ direita ‚Üí esquerda
    skipChat();
  } else {
    // üëà esquerda ‚Üí direita
    voltarPaginaAnterior();
  }
}

function skipChat() {
  const chatArea = document.getElementById('chatArea');
  const message = document.createElement('div');
  message.classList.add('message', 'partner');
  message.textContent = "Voc√™ foi para o pr√≥ximo chat!";
  chatArea.appendChild(message);
  chatArea.scrollTop = chatArea.scrollHeight;
}

function voltarPaginaAnterior() {
  // aqui voc√™ pode redirecionar ou esconder a p√°gina atual
  window.history.back(); // volta pra p√°gina anterior
}
function openperfil() {
  document.querySelector('.profile1').style.display = 'flex';
}

document.querySelector('.profile-image').addEventListener('click', function() {
  openperfil();
});
function closePerfil() {
  document.querySelector('.profile1').style.display = 'none';
}



        function reportChat() {
            document.getElementById('reportModal').style.display = 'flex';
           
        }
        function submitReport() {
  // Aqui voc√™ pode colocar a l√≥gica de envio real da den√∫ncia depois, se quiser
  // Por enquanto, apenas mostra a mensagem de agradecimento
  const thankYou = document.getElementById('thankYouMessage');

  thankYou.style.display = 'block'; // mostra mensagem
  setTimeout(() => {
    thankYou.style.display = 'none'; // oculta ap√≥s 3s
    document.getElementById('reportModal').style.display = 'none'; // fecha modal
  }, 3000);
}


        function closeReportModal() {
            document.getElementById('reportModal').style.display = 'none';
        }

        function submitReport() {
            const selectedReason = document.querySelector('input[name="reportReason"]:checked');
            const description = document.getElementById('reportDescription').value.trim();

            if (!selectedReason) {
                document.getElementById('errorMessage').style.display = 'block';
                return;
            }

            document.getElementById('errorMessage').style.display = 'none';

            // Exibe uma mensagem de agradecimento ap√≥s o envio da den√∫ncia
            document.getElementById('reportModal').style.display = 'none';
            document.getElementById('thankYouMessage').style.display = 'block';
            setTimeout(function() {
                document.getElementById('thankYouMessage').style.display = 'none';
            }, 3000); // A mensagem desaparece ap√≥s 3 segundos
        }
        // Quando clicar na bandeira, abre a √°rea de den√∫ncia
document.getElementById("flagIcon").addEventListener("click", function() {
  reportChat();
});
document.addEventListener("DOMContentLoaded", () => {
    // Recupera o e-mail do usu√°rio logado
    const email = localStorage.getItem("email");
    if (!email) return;

    // Recupera os dados do usu√°rio
    const userData = JSON.parse(localStorage.getItem("user_" + email)) || {};

    // Seleciona todos os usu√°rios
    const users = document.querySelectorAll(".chat-container .user");

    // Pega o segundo usu√°rio (Usu√°rio 2)
    const user2El = users[1];
    if (!user2El) return;

    const user2NameEl = user2El.querySelector(".username");
    const user2ImageEl = user2El.querySelector(".profile-image");

    // Atualiza o nome do Usu√°rio 2
    if (userData.username && user2NameEl) {
        user2NameEl.textContent = userData.username;
    }

    // Atualiza a imagem do Usu√°rio 2
    if (userData.profileImage && user2ImageEl) {
        user2ImageEl.src = userData.profileImage;
    }

    // Opcional: aplica borda se tiver
    if (userData.borderColor) {
        user2ImageEl.style.border = `3px solid ${userData.borderColor}`;
        user2ImageEl.style.borderRadius = "50%";
    }
});


    </script>
</body>
</html>
